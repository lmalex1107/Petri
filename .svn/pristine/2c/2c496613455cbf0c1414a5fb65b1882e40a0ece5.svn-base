package view;

import java.awt.BorderLayout;
import java.io.File;
import java.util.ArrayList;

import javax.swing.*;

import control.Control;
import control.file.FileHandling;
import control.file.Parser;
import model.Arc;
import model.Knot;

public class GUI extends JFrame{
	File xmlfile;
	
	PetriGraph petrigraph;
	PetriGraph lastpetrigraph;
	
	public JMenuItem oeffnen;
	public JMenuItem neu_laden;
	public JMenuItem analyse;
	public JMenuItem beenden;
	
	ArrayList<Knot> knotlist;
	ArrayList<Arc> arclist;
	
	public CenterPanel centerpanel;

	public GUI (Control control, ArrayList<Knot> knotlist, ArrayList<Arc> arclist) {
		super("Alexander Adams q9264825");
		this.knotlist = knotlist;
		this.arclist = arclist;
		
		//File pnmlfile = new File("/home/alex/Fernuni/Propra/Wi202021/ProPra-WS20-Basis/Beispiele/152-B1-N06-A06-Example03v1.pnml"); //Test
		//Parser parser = new Parser(pnmlfile);
		//parser.initParser();
		//parser.parse();
		//this.knotlist = parser.getKnotList();
		//this.arclist = parser .getArcList();
		//petrigraph = new PetriGraph(this.knotlist, this.arclist);
		
		System.setProperty("org.graphstream.ui.renderer", "org.graphstream.ui.j2dviewer.J2DGraphRenderer");
		
		this.setSize(1000, 700);
		this.setDefaultCloseOperation(EXIT_ON_CLOSE);
		this.setLayout(new BorderLayout());
		lastpetrigraph = null;
		
		JMenuBar menubar = new JMenuBar();
		JMenu datei = new JMenu("Datei");
		oeffnen = new JMenuItem ("Ã–ffnen");
		oeffnen.addActionListener(control);
		neu_laden = new JMenuItem ("Neu laden");
		neu_laden.addActionListener(control);
		analyse = new JMenuItem ("Analyse mehrerer Dateien");
		analyse.addActionListener(control);
		beenden = new JMenuItem ("Beenden");
		beenden.addActionListener(control);
		datei.add(oeffnen);
		datei.add(neu_laden);
		datei.add(analyse);
		datei.add(beenden);
		menubar.add(datei);
		this.add(menubar, BorderLayout.NORTH);
		TextPanel textpanel = new TextPanel();
		
		centerpanel = new CenterPanel(petrigraph);
		this.add(centerpanel, BorderLayout.CENTER);
		
		this.add(textpanel, BorderLayout.SOUTH);
		this.setVisible(true);
	}
	
	public void open() {
		lastpetrigraph = petrigraph;
		FileHandling filehandling = new FileHandling();
		xmlfile = filehandling.getFile();
		if (xmlfile != null) {
			System.out.println("Test 1");
			Parser parser = new Parser (xmlfile);
			parser.initParser();
			parser.parse();
			this.knotlist = parser.getKnotList();
			this.arclist = parser.getArcList();
			this.petrigraph = new PetriGraph(this.knotlist, this.arclist);
			centerpanel.setPetriGraph(this.petrigraph);
			
		}
	}
	
	public PetriGraph getPetriGraph() {
		return this.petrigraph;
	}
	
	public void load_new() {
		
	}
	
	public void analyse() {
		
	}
	
	public void exit( ) {
		System.exit(0);
	}
	
	
	public static void main (String args[]) {
		GUI gui = new GUI(null, null, null);
	}
	
}
