package view;

import java.util.ArrayList;

import org.graphstream.graph.implementations.MultiGraph;
import org.graphstream.graph.Edge;
import org.graphstream.graph.Node;

import model.Arc;
import model.ERArc;
import model.ERKnot;
import model.Knot;

public class Erreichbarkeitsgraph extends MultiGraph{
	
	private static String CSS_FILE = "url(" + PetriGraph.class.getResource("/graph.css") + ")";
	
	ArrayList<ERKnot>erknotlist = null;
	ArrayList<ERArc>erarclist = null;

	public Erreichbarkeitsgraph() {
		super("");
		this.addAttribute("ui.stylesheet", CSS_FILE);
	}
	
	public void addKnot (ArrayList<ERKnot> erknotlist, ArrayList<ERArc> erarclist) {
		this.erknotlist = erknotlist;
		this.erarclist = erarclist;
		
		for (int i = 0; i < erknotlist.size(); i++) {
			
			if (this.getNode(this.erknotlist.get(i).getLabel()) == null) {
				Node node = this.addNode(erknotlist.get(i).getLabel());
				node.addAttribute("ui.label", erknotlist.get(i).getLabel());	
			}
		}
		
		for (int j = 0; j < this.erarclist.size(); j++) {				//Neue Kante dann einfÃ¼gen, wenn noch keine Kante mit dieser
			String label = this.erarclist.get(j).getId();				//ID vorhanden ist oder, wenn ID zwar bereits vorhanden ist,
			String source = this.erarclist.get(j).getSource() ;			//aber andere Knoten miteiander verbindet.
			String target = this.erarclist.get(j).getTarget();
			String id = Integer.toString(j);
			if ((this.getEdge(id) != null) && ((this.getEdge(id).getSourceNode().hasAttribute(source) == false) && (this.getEdge(id).getTargetNode().hasAttribute(target) == false))){
				
			}
			else {
				Edge edge = this.addEdge(id, source, target, true);
				edge.addAttribute("ui.label", label);
			}
		}
		
		System.out.println("Kanten-Test");
		for (int j = 0; j < this.erarclist.size(); j++) {
			System.out.println("ID: " + this.erarclist.get(j).getId());
			System.out.println("Quelle: " + this.erarclist.get(j).getSource());
			System.out.println("Ziel: " + this.erarclist.get(j).getTarget());
		}
		System.out.println("Ende Kanten-Test");
		
		
	}
	
	private boolean nodealreadyexist (ERKnot erknot) {
		boolean nodealreadyexist = false;
	//	for (ERKnot erknot this) {
			
//		}
		return nodealreadyexist;
	}
	
}
